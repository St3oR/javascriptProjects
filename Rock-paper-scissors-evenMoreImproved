<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <p>Rock paper scissors:</p>

    <button onclick="rock()">Rock</button>

    <button onclick="paper()">Paper</button>

    <button onclick="scissors()">Scissors</button>

    <button onclick="resetS()">Reset Score</button>

    <script>

        //global variables
        const choices = ['Rock', 'Paper', 'Scissors'];

        //load back from localStorage the score turning the JSON object into javascript object
        const score = JSON.parse(localStorage.getItem('score')) || { wins: 0, losses: 0, ties: 0 };

        //button functions

        function rock() {
            let userH = 'Rock';
            startGame(userH, rando());
        }

        function paper() {
            let userH = 'Paper';
            startGame(userH, rando());
        }

        function scissors() {
            let userH = 'Scissors';
            startGame(userH, rando());
        }

        function resetS() {
            score.wins = 0;
            score.losses = 0;
            score.ties = 0;
            alert("Score reset"
                + `\nWins: ${score.wins}`
                + `\nLosses: ${score.losses}`
                + `\nTies: ${score.ties}`
            );
        }



        //function for random computer choice

        function rando() {
            let computerH = choices[Math.floor(Math.random() * choices.length)];
            //console.log(computerH);
            return computerH;
        }



        //game logic and scoring logic

        function startGame(userH, computerH) {
            if (userH === computerH) {
                score.ties++;
                result('draw');
            } else if (userH === "Rock") {
                if (computerH === "Paper") {
                    score.losses++;
                    result('lose');
                } else if (computerH === "Scissors") {
                    score.wins++;
                    result('win');
                }
            } else if (userH === "Paper") {
                if (computerH === "Scissors") {
                    score.losses++;
                    result('lose');
                } else if (computerH === "Rock") {
                    score.wins++;
                    result('win');
                }
            } else if (userH === "Scissors") {
                if (computerH === "Rock") {
                    score.losses++;
                    result('lose');
                } else if (computerH === "Paper") {
                    score.wins++;
                    result('win');
                }
            }
            

            function result(result) {
                if (result === 'win') {
                    alert(`You won! You picked ${userH} and computer picked ${computerH}`
                            + `\nWins: ${score.wins}`
                            + `\nLosses: ${score.losses}`
                            + `\nTies: ${score.ties}`
                        )
                } else if (result === 'lose') {
                    alert(`You lost! You picked ${userH} and computer picked ${computerH}`
                            + `\nWins: ${score.wins}`
                            + `\nLosses: ${score.losses}`
                            + `\nTies: ${score.ties}`
                        )
                } else if (result === 'draw') {

                    alert(`It's a draw, you both picked ${computerH}`
                            + `\nWins: ${score.wins}`
                            + `\nLosses: ${score.losses}`
                            + `\nTies: ${score.ties}`
                        )
                }
                
                //add to local storage the score after each game turning javascript object into JSON object
                localStorage.setItem('score', JSON.stringify(score));
            }
        }


    </script>
</body>
</html>
